<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>PebbleDev.org - Applications</title>

    <!-- Bootstrap -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="container">
</div>
<div class="container">
    <a href="/wiki/Main_Page/"><img src="/images/pebble-logo.png"></a><h1>Applications</h1>
</div>
<div class="container">
        
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Applications"><span class="tocnumber">1</span> <span class="toctext">Applications</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Watchfaces"><span class="tocnumber">1.1</span> <span class="toctext">Watchfaces</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#Source"><span class="tocnumber">1.1.1</span> <span class="toctext">Source</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="#Examples"><span class="tocnumber">1.1.2</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#File_Structure"><span class="tocnumber">1.1.3</span> <span class="toctext">File Structure</span></a>
<ul>
<li class="toclevel-4 tocsection-6"><a href="#manifest.json"><span class="tocnumber">1.1.3.1</span> <span class="toctext">manifest.json</span></a></li>
<li class="toclevel-4 tocsection-7"><a href="#pebble-app.bin"><span class="tocnumber">1.1.3.2</span> <span class="toctext">pebble-app.bin</span></a></li>
<li class="toclevel-4 tocsection-8"><a href="#app_resources.pbpack"><span class="tocnumber">1.1.3.3</span> <span class="toctext">app_resources.pbpack</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Applications">Applications</span></h1>
<p>So far the only known application type is watchface - presumably the music app is also an app but it is built in to the firmware.
</p>
<h2><span class="mw-headline" id="Watchfaces">Watchfaces</span></h2>
<h3><span class="mw-headline" id="Source">Source</span></h3>
<p>As of 2013-02-15, the Pebble Android and iPhone apps load a webpage with a list of watchfaces from <a rel="nofollow" class="external free" href="http://pebble-static.s3.amazonaws.com/watchfaces/index.html">http://pebble-static.s3.amazonaws.com/watchfaces/index.html</a>
</p>
<h3><span class="mw-headline" id="Examples">Examples</span></h3>
<p>The list of watchfaces as of 2013-02-22 is:
</p>
<ul>
<li> <a rel="nofollow" class="external text" href="http://pebble-static.s3.amazonaws.com/watchfaces/apps/simplicity.pbw">simplicity.pbw</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://pebble-static.s3.amazonaws.com/watchfaces/apps/times_square.pbw">times_square.pbw</a>
</li>
</ul>
<ul>
<li> <a rel="nofollow" class="external text" href="http://pebble-static.s3.amazonaws.com/watchfaces/apps/brains.pbw">brains.pbw</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://pebble-static.s3.amazonaws.com/watchfaces/apps/segment_six.pbw">segment_six.pbw</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://pebble-static.s3.amazonaws.com/watchfaces/apps/just_a_little_bit.pbw">just_a_little_bit.pbw</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://pebble-static.s3.amazonaws.com/watchfaces/apps/big-time-12.pbw">big-time-12.pbw</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://pebble-static.s3.amazonaws.com/watchfaces/apps/big-time-24.pbw">big-time-24.pbw</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://pebble-static.s3.amazonaws.com/watchfaces/apps/tic_tock_toe.pbw">tic_tock_toe.pbw</a>
</li>
</ul>
<p>Of these, the most useful for analysis are big-time-12 and big-time-24 as they should be nearly identical and watchfaces are not encrypted.
</p>
<h3><span class="mw-headline" id="File_Structure">File Structure</span></h3>
<p>Each watch face is a ".pbw" file and is a standard zip file. All current watch faces consist of three parts; manifest.json, pebble-app.bin, and app_resources.pbpack.
</p>
<h4><span class="mw-headline" id="manifest.json">manifest.json</span></h4>
<p>This file appears to be generated by Pebble's internal SDK. It is useful for double-checking parsing of the other files as it contains CRCs and duplicate metadata.
</p>
<h4><span class="mw-headline" id="pebble-app.bin">pebble-app.bin</span></h4>
<p>This file appears to have some custom Pebble-centric headers (such as the name of the application) followed by a binary.
The definition according to the 'pebble_app_info.h' file in the SDK:
</p><p>
</p>
<pre>typedef struct __attribute__((__packed__)) {
 char header[8];                   //!&lt; Sentinal value, should always be 'PBLAPP\0\0'
 Version struct_version;           //!&lt; version of this structure's format
 Version sdk_version;              //!&lt; version of the SDK used to build this app
 Version app_version;              //!&lt; version of the app
 uint16_t size;                    //!&lt; size of the app binary, including this metadata but not the reloc table
 uint32_t offset;                  //!&lt; The entry point of this executable
 uint32_t crc;                     //!&lt; CRC of the app data only, ie, not including this struct or the reloc table at the end
 char name[APP_NAME_BYTES];        //!&lt; Name to display on the menu
 char company[COMPANY_NAME_BYTES]; //!&lt; Name of the maker of this app
 uint32_t icon_resource_id;        //!&lt; Resource ID within this app's bank to use as a 32x32 icon
 uint32_t sym_table_addr;          //!&lt; The system will poke the sdk's symbol table address into this field on load
 uint32_t flags;                   //!&lt; Bitwise OR of PebbleAppFlags
 uint32_t reloc_list_start;        //!&lt; The offset of the address relocation list
 uint32_t num_reloc_entries;       //!&lt; The number of entries in the address relocation list
 struct __attribute__((__packed__)) {
   uint8_t byte0;
   uint8_t byte1;
   uint8_t byte2;
   uint8_t byte3;
   uint8_t byte4;
   uint8_t byte5;
   uint8_t byte6;
   uint8_t byte7;
   uint8_t byte8;
   uint8_t byte9;
   uint8_t byte10;
   uint8_t byte11;
   uint8_t byte12;
   uint8_t byte13;
   uint8_t byte14;
   uint8_t byte15;
 } uuid;                           //!&lt; The app's UUID
} PebbleAppInfo;
</pre>
<p>
</p><p>The current sizes of 'name' and 'company' are 32:

</p>
<pre>#define APP_NAME_BYTES 32
#define COMPANY_NAME_BYTES 32
</pre>
<p>
</p><p>The version info consists of 2 bytes. One for the major version, and one for the minor version:

</p>
<pre>//! Version data structure with minor &amp; major versions: When making non-backwards-compatible changes,
//! the major version should get bumped. When making a change (e.g. to the PebbleAppInfo struct) that is backwards
//! compatible (e.g. adding a field at the end), you should only bump the minor version.
typedef struct __attribute__((__packed__)) {
 uint8_t major; //!&lt; "compatibility" version number
 uint8_t minor;
} Version;
</pre>
<p>
</p><p>The end of the .bin file contains the timestamp and crc of the pbpack file, CRCs of the resources, references to external (system) resources / fonts, the app version &amp; app title, but the format is unknown.
</p>
<h4><span class="mw-headline" id="app_resources.pbpack">app_resources.pbpack</span></h4>
<p>This file has the same format as the app_resources.pbpack in firmware updates.
</p>




</div>


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/js/jquery-1.11.3.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/js/bootstrap.min.js"></script>
</body>
</html>